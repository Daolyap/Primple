<UserControl x:Class="Primple.Desktop.Views.StlEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:h="clr-namespace:HelixToolkit.Wpf;assembly=HelixToolkit.Wpf">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" Margin="0,0,0,15" Padding="15" Style="{StaticResource GlassPanelStyle}">
            <StackPanel Orientation="Horizontal">
                <Button x:Name="ImportBtn" Content="Import STL" Style="{StaticResource GlassButtonStyle}" Margin="0,0,10,0" Click="ImportButton_Click"/>
                
                <Border Width="1" Background="#33FFFFFF" Margin="0,5,10,5"/>
                
                <Button Content="Save Project" Style="{StaticResource GlassButtonStyle}" Margin="0,0,10,0" Click="SaveProject_Click"/>
                <Button Content="Load Project" Style="{StaticResource GlassButtonStyle}" Margin="0,0,10,0" Click="LoadProject_Click"/>
                
                <Border Width="1" Background="#33FFFFFF" Margin="0,5,10,5"/>

                <Button x:Name="ClearBtn" Content="Clear View" Style="{StaticResource GlassButtonStyle}" Click="ClearButton_Click"/>
                <!-- Tool Options -->
                <TextBlock Text="Tools" Foreground="#AAAAAA" Margin="20,0,0,0" VerticalAlignment="Center"/>
                
                <StackPanel Orientation="Vertical" Margin="10,0,0,0" VerticalAlignment="Center">
                    <TextBlock Text="Scale Factor" Foreground="White" FontSize="10"/>
                    <StackPanel Orientation="Horizontal">
                        <Slider x:Name="ScaleSlider" Width="100" Minimum="0.1" Maximum="5" Value="1" ValueChanged="Transform_Changed"/>
                        <TextBox Text="{Binding ElementName=ScaleSlider, Path=Value, StringFormat=N2}" Width="40" Margin="5,0,0,0" Style="{x:Null}" Background="#22FFFFFF" Foreground="White" BorderThickness="0" Padding="2" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="10,0,0,0" VerticalAlignment="Center">
                    <TextBlock Text="Rotate Y (Deg)" Foreground="White" FontSize="10"/>
                    <StackPanel Orientation="Horizontal">
                        <Slider x:Name="RotateYSlider" Width="100" Minimum="0" Maximum="360" Value="0" ValueChanged="Transform_Changed"/>
                        <TextBox Text="{Binding ElementName=RotateYSlider, Path=Value, StringFormat=N0}" Width="40" Margin="5,0,0,0" Style="{x:Null}" Background="#22FFFFFF" Foreground="White" BorderThickness="0" Padding="2" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <!-- Status -->
                <TextBlock x:Name="StatusText" Text="Ready" Foreground="#88FFFFFF" VerticalAlignment="Center" Margin="20,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- 3D Viewport -->
        <Border Grid.Row="1" Style="{StaticResource GlassPanelStyle}" ClipToBounds="True">
            <h:HelixViewport3D x:Name="viewport" ZoomExtentsWhenLoaded="True" ShowCoordinateSystem="True" Background="Transparent">
                <h:HelixViewport3D.DefaultCamera>
                    <PerspectiveCamera Position="8,9,7" LookDirection="-1,-1,-1" UpDirection="0,1,0"/>
                </h:HelixViewport3D.DefaultCamera>
                
                <h:DefaultLights/>
                <h:GridLinesVisual3D Width="200" Length="200" MinorDistance="1" MajorDistance="10" Thickness="0.05" Fill="#40FFFFFF"/>
                
                <ModelVisual3D x:Name="modelContainer"/>
            </h:HelixViewport3D>
        </Border>
    </Grid>
</UserControl>
